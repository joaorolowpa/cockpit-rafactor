<div appPageContainer>
  <div appPageHeader>
    <div>
      <h1 class="page-title">Fund Managers</h1>
      <p class="page-subtitle">Manage your fund managers</p>
    </div>
  </div>

  <div appFiltersBar>
    <app-search-input
      placeholder="Search for a fund or company..."
      [value]="searchTerm()"
      [disabled]="loading()"
      (valueChange)="searchTerm.set($event); onSearch()"
      (cleared)="clearSearch()"
    ></app-search-input>
  </div>

  @if (loading()) {
    <app-state
      type="loading"
      icon="pi pi-spinner pi-spin"
      message="Loading fund managers..."
    ></app-state>
  }

  @if (error() && !loading()) {
    <app-state
      type="error"
      icon="pi pi-exclamation-circle"
      [message]="error() || ''"
      actionLabel="Retry"
      (action)="loadFunds()"
    ></app-state>
  }

  @if (!loading() && !error() && filteredFunds().length > 0) {
    <div class="funds-grid">
      @for (fund of filteredFunds(); track fund.id) {
        <a class="fund-card" [routerLink]="['/research-funds/fund-managers', fund.id]">
          <div class="fund-initial">
            {{ fund.display_name.charAt(0) }}
          </div>
          <div class="fund-info">
            <span class="fund-name">{{ fund.display_name }}</span>
          </div>
        </a>
      }
    </div>
  }

  @if (!loading() && !error() && filteredFunds().length === 0) {
    <app-state
      type="empty"
      icon="pi pi-search"
      message="No fund managers found"
    ></app-state>
  }
</div>
